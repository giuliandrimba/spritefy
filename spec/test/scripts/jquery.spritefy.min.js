(function(a){a.fn.spritefy=function(b,c){function g(a){switch(a.type){case"animationstart":j();break;case"webkitAnimationStart":j();break;case"animationend":h();break;case"webkitAnimationEnd":h();break;case"animationiteration":i();break;case"webkitAnimationIteration":i()}}function h(){e.removeAttr("style"),d.onComplete&&d.onComplete()}function i(a){d.onIteration&&d.onIteration()}function j(){d.onStart&&d.onStart()}function k(){d.duration&&m("animation-duration",d.duration.toString()+"s"),d.delay&&m("animation-delay",d.delay.toString()+"s"),d.count&&m("animation-iteration-count",d.count.toString())}function l(){m("animation-name",b),m("animation-timing-function","step-end"),m("animation-iteration-count","infinite"),m("animation-fill-mode","backwards")}function m(a,b){e.css("-webkit-"+a,b),e.css("-moz-"+a,b)}function n(){e.removeClass(b),e.unbind("animationstart"),e.unbind("webkitAnimationStart"),e.unbind("animationend"),e.unbind("webkitAnimationEnd"),e.unbind("animationiteration"),e.unbind("webkitAnimationIteration")}var d=c,e=this;n(),e.removeClass(),e.addClass(b),l(),k();var f={};return f.play=function(){return f.status="playing",m("animation-play-state","running"),f},f.pause=function(){return f.status="paused",m("animation-play-state","paused"),f},e.bind("animationstart",g),e.bind("webkitAnimationStart",g),e.bind("animationend",g),e.bind("webkitAnimationEnd",g),e.bind("animationiteration",g),e.bind("webkitAnimationIteration",g),a.fn.animation=f,f.pause(),f}})(jQuery)